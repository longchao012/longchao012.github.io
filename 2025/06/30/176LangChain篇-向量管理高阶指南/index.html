<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"mzfnai.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"style":"flat"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"搜索文章","hits_empty":"我们没有找到任何搜索结果：${query}","hits_stats":"找到${hits}个结果，耗时${time}毫秒"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="深入探讨LangChain向量管理的高阶应用，包括向量存储原理、嵌入技术、特征工程和语义搜索的实现方法。">
<meta property="og:type" content="article">
<meta property="og:title" content="LangChain篇-向量管理高阶指南">
<meta property="og:url" content="http://mzfnai.com/2025/06/30/176LangChain%E7%AF%87-%E5%90%91%E9%87%8F%E7%AE%A1%E7%90%86%E9%AB%98%E9%98%B6%E6%8C%87%E5%8D%97/index.html">
<meta property="og:site_name" content="妙知赋能AI longchao&#39;s Blog">
<meta property="og:description" content="深入探讨LangChain向量管理的高阶应用，包括向量存储原理、嵌入技术、特征工程和语义搜索的实现方法。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://mzfnai.com/images/LangChain%E7%AF%87_UuJPbndY0olP3bxw9lhcMWXQnyE_20250908_111819_871.jpg">
<meta property="og:image" content="http://mzfnai.com/images/LangChain%E7%AF%87_G9fOba6Xvo4HNYxmtVqcpNHXncg_20250908_111819_872.png">
<meta property="og:image" content="http://mzfnai.com/images/LangChain%E7%AF%87_image_20250908_111819_872.png">
<meta property="article:published_time" content="2025-06-30T11:37:52.000Z">
<meta property="article:modified_time" content="2025-09-08T03:32:44.000Z">
<meta property="article:author" content="longchao">
<meta property="article:tag" content="LangChain">
<meta property="article:tag" content="向量存储">
<meta property="article:tag" content="向量嵌入">
<meta property="article:tag" content="语义搜索">
<meta property="article:tag" content="特征工程">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://mzfnai.com/images/LangChain%E7%AF%87_UuJPbndY0olP3bxw9lhcMWXQnyE_20250908_111819_871.jpg">

<link rel="canonical" href="http://mzfnai.com/2025/06/30/176LangChain%E7%AF%87-%E5%90%91%E9%87%8F%E7%AE%A1%E7%90%86%E9%AB%98%E9%98%B6%E6%8C%87%E5%8D%97/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>LangChain篇-向量管理高阶指南 | 妙知赋能AI longchao's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta custom-logo">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">妙知赋能AI longchao's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">A blog about life</p>
      <a>
        <img class="custom-logo-image" src="/uploads/custom-logo.jpg" alt="妙知赋能AI longchao's Blog">
      </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://mzfnai.com/2025/06/30/176LangChain%E7%AF%87-%E5%90%91%E9%87%8F%E7%AE%A1%E7%90%86%E9%AB%98%E9%98%B6%E6%8C%87%E5%8D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="longchao">
      <meta itemprop="description" content="A blog about life, technology, and everything in between.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="妙知赋能AI longchao's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          LangChain篇-向量管理高阶指南
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-06-30 19:37:52" itemprop="dateCreated datePublished" datetime="2025-06-30T19:37:52+08:00">2025-06-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AI/" itemprop="url" rel="index"><span itemprop="name">AI</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AI/LangChain/" itemprop="url" rel="index"><span itemprop="name">LangChain</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
            <div class="post-description">深入探讨LangChain向量管理的高阶应用，包括向量存储原理、嵌入技术、特征工程和语义搜索的实现方法。</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="一、Vector-stores-向量存储"><a href="#一、Vector-stores-向量存储" class="headerlink" title="一、Vector stores(向量存储)"></a>一、Vector stores(向量存储)</h2><p>存储和搜索非结构化数据的最常见方法之一是将其嵌入并存储生成的嵌入向量， 然后在查询时将非结构化查询嵌入并检索与嵌入查询“最相似”的嵌入向量。 向量存储会处理存储嵌入数据并为您执行向量搜索。 可以通过以下方式将向量存储转换为检索器接口：</p>
<p>Retrievers(检索器)是一个接口，根据非结构化查询返回文档。 它比向量存储更通用。 检索器不需要能够存储文档，只需要能够返回（或检索）它们。 检索器可以从向量存储器创建，但也足够广泛，包括 Wikipedia 搜索和 Amazon Kendra。 检索器接受字符串查询作为输入，并返回文档列表作为输出。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vectorstore = MyVectorStore()</span><br><span class="line">retriever = vectorstore.as_retriever()</span><br></pre></td></tr></table></figure>





<h2 id="二、向量嵌入"><a href="#二、向量嵌入" class="headerlink" title="二、向量嵌入"></a>二、向量嵌入</h2><p>向量嵌入(Vector Embeddings)，对于传统数据库，搜索功能都是基于不同的索引方式（B Tree、倒排索引等）加上精确匹配和排序算法（BM25、TF-IDF）等实现的。本质还是基于文本的精确匹配，这种索引和搜索算法对于关键字的搜索功能非常合适，但对于语义搜索功能就非常弱。</p>
<p>例如，如果你搜索 “小狗”，那么你只能得到带有“小狗” 关键字相关的结果，而无法得到 “柯基”、“金毛” 等结果，因为 “小狗” 和“金毛”是不同的词，传统数据库无法识别它们的语义关系，所以传统的应用需要人为的将 “小狗” 和“金毛”等词之间打上特征标签进行关联，这样才能实现语义搜索。而如何将生成和挑选特征这个过程，也被称为 Feature Engineering（特征工程），它是将原始数据转化成更好的表达问题本质的特征的过程。</p>
<p>但是如果你需要处理非结构化的数据，就会发现非结构化数据的特征数量会开始快速膨胀，例如我们处理的是图像、音频、视频等数据，这个过程就变得非常困难。例如，对于图像，可以标注颜色、形状、纹理、边缘、对象、场景等特征，但是这些特征太多了，而且很难人为的进行标注，所以我们需要一种自动化的方式来提取这些特征，而这可以通过 Vector Embedding 实现。</p>
<p>Vector Embedding 是由 AI 模型（例如大型语言模型 LLM）生成的，它会根据不同的算法生成高维度的向量数据，代表着数据的不同特征，这些特征代表了数据的不同维度。例如，对于文本，这些特征可能包括词汇、语法、语义、情感、情绪、主题、上下文等。对于音频，这些特征可能包括音调、节奏、音高、音色、音量、语音、音乐等。</p>
<p>例如对于目前来说，文本向量可以通过 OpenAI 的 text-embedding-ada-002 模型生成，图像向量可以通过 clip-vit-base-patch32 模型生成，而音频向量可以通过 wav2vec2-base-960h 模型生成。这些向量都是通过 AI 模型生成的，所以它们都是具有语义信息的。</p>
<p>例如我们将这句话 “Your text string goes here” 用 text-embedding-ada-002 模型进行文本 Embedding，它会生成一个 1536 维的向量，得到的结果是这样：<code>“-0.006929283495992422, -0.005336422007530928, ... -4547132266452536e-05,-0.024047505110502243”</code>，它是一个长度为 1536 的数组。这个向量就包含了这句话的所有特征，这些特征包括词汇、语法，我们可以将它存入向量数据库中，以便我们后续进行语义搜索。</p>
<h2 id="三、特征和向量"><a href="#三、特征和向量" class="headerlink" title="三、特征和向量"></a>三、特征和向量</h2><p>虽然向量数据库的核心在于相似性搜索 (Similarity Search)，但在深入了解相似性搜索前，我们需要先详细了解一下特征和向量的概念和原理。</p>
<p>我们先思考一个问题？为什么我们在生活中区分不同的物品和事物？</p>
<p>如果从理论角度出发，这是因为我们会通过识别不同事物之间不同的特征来识别种类，例如分别不同种类的小狗，就可以通过体型大小、毛发长度、鼻子长短等特征来区分。如下面这张照片按照体型排序，可以看到体型越大的狗越靠近坐标轴右边，这样就能得到一个体型特征的一维坐标和对应的数值，从 0 到 1 的数字中得到每只狗在坐标系中的位置。</p>
<p>然而单靠一个体型大小的特征并不够，像照片中哈士奇、金毛和拉布拉多的体型就非常接近，我们无法区分。所以我们会继续观察其它的特征，例如毛发的长短。</p>
<p><img src="/images/LangChain%E7%AF%87_UuJPbndY0olP3bxw9lhcMWXQnyE_20250908_111819_871.jpg"></p>
<p>这样每只狗对应一个二维坐标点，我们就能轻易的将哈士奇、金毛和拉布拉多区分开来，如果这时仍然无法很好的区分德牧和罗威纳犬。我们就可以继续再从其它的特征区分，比如鼻子的长短，这样就能得到一个三维的坐标系和每只狗在三维坐标系中的位置。</p>
<p>在这种情况下，只要特征足够多，就能够将所有的狗区分开来，最后就能得到一个高维的坐标系，虽然我们想象不出高维坐标系长什么样，但是在数组中，我们只需要一直向数组中追加数字就可以了。</p>
<p>实际上，只要维度够多，我们就能够将所有的事物区分开来，世间万物都可以用一个多维坐标系来表示，它们都在一个高维的特征空间中对应着一个坐标点。</p>
<p>那这和相似性搜索 (Similarity Search) 有什么关系呢？你会发现在上面的二维坐标中，德牧和罗威纳犬的坐标就非常接近，这就意味着它们的特征也非常接近。我们都知道向量是具有大小和方向的数学结构，所以可以将这些特征用向量来表示，这样就能够通过计算向量之间的距离来判断它们的相似度，这就是<strong>相似性测量</strong>。</p>
<h2 id="四、Chroma"><a href="#四、Chroma" class="headerlink" title="四、Chroma"></a>四、Chroma</h2><p>官方文档：<a target="_blank" rel="noopener" href="https://docs.trychroma.com/">https://docs.trychroma.com/</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.trychroma.com/getting-started">Chroma</a> ( &#x2F;‘kromə&#x2F; n. （色彩的）浓度，色度 )是一个以人工智能为基础的开源向量数据库，专注于开发者的生产力和幸福感。Chroma 使用 Apache 2.0 许可证。 使用以下命令安装 Chroma：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install langchain-chroma</span><br></pre></td></tr></table></figure>

<p>Chroma 可以以多种模式运行。以下是每种模式的示例，均与 LangChain 集成：</p>
<ul>
<li><p><code>in-memory</code> - 在 Python 脚本或 Jupyter 笔记本中</p>
</li>
<li><p><code>in-memory with persistance</code> - 在脚本或笔记本中保存&#x2F;加载到磁盘</p>
</li>
<li><p><code>in a docker container</code> - 作为在本地机器或云中运行的服务器</p>
</li>
</ul>
<p>与任何其他数据库一样，您可以进行以下操作：</p>
<ul>
<li><p><code>.add</code></p>
</li>
<li><p><code>.get</code></p>
</li>
<li><p><code>.update</code></p>
</li>
<li><p><code>.upsert</code></p>
</li>
<li><p><code>.delete</code></p>
</li>
<li><p><code>.peek</code></p>
</li>
<li><p>而 <code>.query</code> 则运行相似性搜索。</p>
</li>
</ul>
<p>查看完整文档，请访问 <a target="_blank" rel="noopener" href="https://docs.trychroma.com/reference/Collection">docs</a>。要直接访问这些方法，可以使用 <code>._collection.method()</code>。</p>
<h3 id="1-基本示例"><a href="#1-基本示例" class="headerlink" title="1. 基本示例"></a>1. 基本示例</h3><p>在这个基本示例中，我们获取《乔布斯演讲稿》，将其分割成片段，使用开源嵌入模型进行嵌入，加载到 Chroma 中，然后进行查询。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例：chroma_base.py</span></span><br><span class="line"><span class="comment"># pip install langchain-chromafrom langchain_chroma import Chroma</span></span><br><span class="line"><span class="keyword">from</span> langchain_community.document_loaders <span class="keyword">import</span> TextLoader</span><br><span class="line"><span class="comment"># pip install -U langchain-huggingfacefrom langchain_huggingface import HuggingFaceEmbeddings</span></span><br><span class="line"><span class="keyword">from</span> langchain_text_splitters <span class="keyword">import</span> CharacterTextSplitter</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加载文档并将其分割成片段</span></span><br><span class="line">loader = TextLoader(<span class="string">&quot;../../resource/knowledge.txt&quot;</span>, encoding=<span class="string">&quot;UTF-8&quot;</span>)</span><br><span class="line">documents = loader.load()</span><br><span class="line"><span class="comment"># 将其分割成片段</span></span><br><span class="line">text_splitter = CharacterTextSplitter(chunk_size=<span class="number">1500</span>, chunk_overlap=<span class="number">0</span>)</span><br><span class="line">docs = text_splitter.split_documents(documents)</span><br><span class="line"><span class="comment"># 创建开源嵌入函数</span></span><br><span class="line">embedding_function = HuggingFaceEmbeddings(model_name=<span class="string">&quot;all-MiniLM-L6-v2&quot;</span>)</span><br><span class="line"><span class="comment"># 将其加载到 Chroma 中</span></span><br><span class="line">db = Chroma.from_documents(docs, embedding_function)</span><br><span class="line"><span class="comment"># 进行查询</span></span><br><span class="line">query = <span class="string">&quot;Pixar公司是做什么的?&quot;</span></span><br><span class="line">docs = db.similarity_search(query)</span><br><span class="line"><span class="comment"># 打印结果print(docs[0].page_content)</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">During the next five years, I started a company named NeXT, another company named Pixar, and fell in love with an amazing woman who would become my wife. Pixar went on to create the worlds first computer animated feature film, Toy Story, and is now the most successful animation studio in the world. In a remarkable turn of events, Apple bought NeXT, I retuned to Apple, and the technology we developed at NeXT is at the heart of Apple&#x27;s current renaissance. And Laurene and I have a wonderful family together.</span><br><span class="line">在接下来的五年里, 我创立了一个名叫 NeXT 的公司，还有一个叫Pixar的公司，然后和一个后来成为我妻子的优雅女人相识。Pixar 制作了世界上第一个用电脑制作的动画电影——“”玩具总动员”，Pixar 现在也是世界上最成功的电脑制作工作室。在后来的一系列运转中，Apple 收购了NeXT，然后我又回到了苹果公司。我们在NeXT 发展的技术在 Apple 的复兴之中发挥了关键的作用。我还和 Laurence 一起建立了一个幸福的家庭。</span><br></pre></td></tr></table></figure>



<h3 id="2-基本示例（包括保存到磁盘）"><a href="#2-基本示例（包括保存到磁盘）" class="headerlink" title="2. 基本示例（包括保存到磁盘）"></a>2. 基本示例（包括保存到磁盘）</h3><p>在上一个示例的基础上，如果您想要保存到磁盘，只需初始化 Chroma 客户端并传递要保存数据的目录。</p>
<p><code>注意</code>：Chroma 尽最大努力自动将数据保存到磁盘，但多个内存客户端可能会相互干扰。最佳做法是，任何给定时间只运行一个客户端。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例：chroma_disk.py</span></span><br><span class="line"><span class="comment"># 保存到磁盘</span></span><br><span class="line">db2 = Chroma.from_documents(docs, embedding_function, persist_directory=<span class="string">&quot;./chroma_db&quot;</span>)</span><br><span class="line">docs = db2.similarity_search(query)</span><br><span class="line"><span class="comment"># 从磁盘加载</span></span><br><span class="line">db3 = Chroma(persist_directory=<span class="string">&quot;./chroma_db&quot;</span>, embedding_function=embedding_function)</span><br><span class="line">docs = db3.similarity_search(query)</span><br><span class="line"><span class="built_in">print</span>(docs[<span class="number">0</span>].page_content)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">During the next five years, I started a company named NeXT, another company named Pixar, and fell in love with an amazing woman who would become my wife. Pixar went on to create the worlds first computer animated feature film, Toy Story, and is now the most successful animation studio in the world. In a remarkable turn of events, Apple bought NeXT, I retuned to Apple, and the technology we developed at NeXT is at the heart of Apple&#x27;s current renaissance. And Laurene and I have a wonderful family together.</span><br><span class="line">在接下来的五年里, 我创立了一个名叫 NeXT 的公司，还有一个叫Pixar的公司，然后和一个后来成为我妻子的优雅女人相识。Pixar 制作了世界上第一个用电脑制作的动画电影——“”玩具总动员”，Pixar 现在也是世界上最成功的电脑制作工作室。在后来的一系列运转中，Apple 收购了NeXT，然后我又回到了苹果公司。我们在NeXT 发展的技术在 Apple 的复兴之中发挥了关键的作用。我还和 Laurence 一起建立了一个幸福的家庭。</span><br></pre></td></tr></table></figure>



<h3 id="3-将-Chroma-客户端传递给-Langchain"><a href="#3-将-Chroma-客户端传递给-Langchain" class="headerlink" title="3. 将 Chroma 客户端传递给 Langchain"></a>3. 将 Chroma 客户端传递给 Langchain</h3><p>您还可以创建一个 Chroma 客户端并将其传递给 LangChain。如果您希望更轻松地访问底层数据库，这将特别有用。</p>
<p>您还可以指定要让 LangChain 使用的集合名称。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例：chroma_client.py</span></span><br><span class="line"><span class="keyword">import</span> chromadb</span><br><span class="line">persistent_client = chromadb.PersistentClient()</span><br><span class="line">collection = persistent_client.get_or_create_collection(<span class="string">&quot;collection_name&quot;</span>)</span><br><span class="line">collection.add(ids=[<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>], documents=[<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>])</span><br><span class="line">langchain_chroma = Chroma(</span><br><span class="line">    client=persistent_client,</span><br><span class="line">    collection_name=<span class="string">&quot;collection_name&quot;</span>,</span><br><span class="line">    embedding_function=embedding_function,</span><br><span class="line">)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;在集合中有&quot;</span>, langchain_chroma._collection.count(), <span class="string">&quot;个文档&quot;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Insert of existing embedding ID: 1</span><br><span class="line">Insert of existing embedding ID: 2</span><br><span class="line">Insert of existing embedding ID: 3</span><br><span class="line">Add of existing embedding ID: 1</span><br><span class="line">Add of existing embedding ID: 2</span><br><span class="line">Add of existing embedding ID: 3</span><br><span class="line">在集合中有 3 个项目</span><br></pre></td></tr></table></figure>



<h3 id="4-更新和删除"><a href="#4-更新和删除" class="headerlink" title="4. 更新和删除"></a>4. 更新和删除</h3><p>在构建真实应用程序时，您不仅希望添加数据，还希望更新和删除数据。</p>
<p>Chroma 要求用户提供 <code>ids</code> 来简化这里的簿记工作。<code>ids</code> 可以是文件名，也可以是类似 <code>filename_paragraphNumber</code> 的组合哈希值。</p>
<p>Chroma 支持所有这些操作，尽管有些操作仍在通过 LangChain 接口进行整合。额外的工作流改进将很快添加。</p>
<p>以下是一个基本示例，展示如何执行各种操作：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例：chroma_update.py</span></span><br><span class="line"><span class="comment"># pip install langchain-chromafrom langchain_chroma import Chroma</span></span><br><span class="line"><span class="keyword">from</span> langchain_community.document_loaders <span class="keyword">import</span> TextLoader</span><br><span class="line"><span class="comment"># pip install -U langchain-huggingfacefrom langchain_huggingface import HuggingFaceEmbeddings</span></span><br><span class="line"><span class="keyword">from</span> langchain_text_splitters <span class="keyword">import</span> CharacterTextSplitter</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加载文档并将其分割成片段</span></span><br><span class="line">loader = TextLoader(<span class="string">&quot;../../resource/knowledge.txt&quot;</span>, encoding=<span class="string">&quot;UTF-8&quot;</span>)</span><br><span class="line">documents = loader.load()</span><br><span class="line"><span class="comment"># 将其分割成片段</span></span><br><span class="line">text_splitter = CharacterTextSplitter(chunk_size=<span class="number">1500</span>, chunk_overlap=<span class="number">0</span>)</span><br><span class="line">docs = text_splitter.split_documents(documents)</span><br><span class="line"><span class="comment"># 创建开源嵌入函数</span></span><br><span class="line">embedding_function = HuggingFaceEmbeddings(model_name=<span class="string">&quot;all-MiniLM-L6-v2&quot;</span>)</span><br><span class="line">query = <span class="string">&quot;Pixar公司是做什么的?&quot;</span><span class="comment"># 创建简单的 ids</span></span><br><span class="line">ids = [<span class="built_in">str</span>(i) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(docs) + <span class="number">1</span>)]</span><br><span class="line"><span class="comment"># 添加数据</span></span><br><span class="line">example_db = Chroma.from_documents(docs, embedding_function, ids=ids)</span><br><span class="line">docs = example_db.similarity_search(query)</span><br><span class="line"><span class="comment"># 更新文档的元数据</span></span><br><span class="line">docs[<span class="number">0</span>].metadata = &#123;<span class="string">&quot;source&quot;</span>: <span class="string">&quot;../../resource/knowledge.txt&quot;</span>,<span class="string">&quot;new_value&quot;</span>: <span class="string">&quot;hello world&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;更新前内容：&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(example_db._collection.get(ids=[ids[<span class="number">0</span>]]))</span><br><span class="line">example_db.update_document(ids[<span class="number">0</span>], docs[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;更新后内容：&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(example_db._collection.get(ids=[ids[<span class="number">0</span>]]))</span><br><span class="line"><span class="comment"># 删除最后一个文档print(&quot;删除前计数&quot;, example_db._collection.count())</span></span><br><span class="line"><span class="built_in">print</span>(example_db._collection.get(ids=[ids[-<span class="number">1</span>]]))</span><br><span class="line">example_db._collection.delete(ids=[ids[-<span class="number">1</span>]])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;删除后计数&quot;</span>, example_db._collection.count())</span><br><span class="line"><span class="built_in">print</span>(example_db._collection.get(ids=[ids[-<span class="number">1</span>]]))</span><br></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">更新前内容：</span><br><span class="line">&#123;&#x27;ids&#x27;: [&#x27;1&#x27;], &#x27;embeddings&#x27;: None, &#x27;metadatas&#x27;: [&#123;&#x27;source&#x27;: &#x27;../../resource/knowledge.txt&#x27;&#125;], &#x27;documents&#x27;: [&quot;\ufeffI am honored to be with you today at your commencement from one of the finest universities in the world. I never graduated from college. Truth be told, this is the closest I&#x27;ve ever gotten to a college graduation. Today I want to tell you three stories from my life. That&#x27;s it. No big deal. Just three stories.\n我今天很荣幸能和你们一起参加毕业典礼，斯坦福大学是世界上最好的大学之一。我从来没有从大学中毕业。说实话,今天也许是在我的生命中离大学毕业最近的一天了。今天我想向你们讲述我生活中的三个故事。不是什么大不了的事情,只是三个故事而已。\n\nThe first story is about connecting the dots.\n第一个故事是关于如何把生命中的点点滴滴串连起来。\n\nI dropped out of Reed College after the first 6 months, but then stayed around as a drop-in for another 18 months or so before I really quit. So why did I drop out?\n我在Reed大学读了六个月之后就退学了，但是在十八个月以后——我真正的作出退学决定之前，我还经常去学校。我为什么要退学呢？&quot;], &#x27;uris&#x27;: None, &#x27;data&#x27;: None, &#x27;included&#x27;: [&#x27;metadatas&#x27;, &#x27;documents&#x27;]&#125;</span><br><span class="line">更新后内容：</span><br><span class="line">&#123;&#x27;ids&#x27;: [&#x27;1&#x27;], &#x27;embeddings&#x27;: None, &#x27;metadatas&#x27;: [&#123;&#x27;new<span class="emphasis">_value&#x27;: &#x27;hello world&#x27;, &#x27;source&#x27;: &#x27;../../resource/knowledge.txt&#x27;&#125;], &#x27;documents&#x27;: [&quot;During the next five years, I started a company named NeXT, another company named Pixar, and fell in love with an amazing woman who would become my wife. Pixar went on to create the worlds first computer animated feature film, Toy Story, and is now the most successful animation studio in the world. In a remarkable turn of events, Apple bought NeXT, I retuned to Apple, and the technology we developed at NeXT is at the heart of Apple&#x27;s current renaissance. And Laurene and I have a wonderful family together.\n在接下来的五年里, 我创立了一个名叫 NeXT 的公司，还有一个叫Pixar的公司，然后和一个后来成为我妻子的优雅女人相识。Pixar 制作了世界上第一个用电脑制作的动画电影——“”玩具总动员”，Pixar 现在也是世界上最成功的电脑制作工作室。在后来的一系列运转中，Apple 收购了NeXT，然后我又回到了苹果公司。我们在NeXT 发展的技术在 Apple 的复兴之中发挥了关键的作用。我还和 Laurence 一起建立了一个幸福的家庭。&quot;], &#x27;uris&#x27;: None, &#x27;data&#x27;: None, &#x27;included&#x27;: [&#x27;metadatas&#x27;, &#x27;documents&#x27;]&#125;</span></span><br><span class="line"><span class="emphasis">删除前计数 16</span></span><br><span class="line"><span class="emphasis">&#123;&#x27;ids&#x27;: [&#x27;16&#x27;], &#x27;embeddings&#x27;: None, &#x27;metadatas&#x27;: [&#123;&#x27;source&#x27;: &#x27;../../resource/knowledge.txt&#x27;&#125;], &#x27;documents&#x27;: [&#x27;Stewart and his team put out several issues of The Whole Earth Catalog, and then when it had run its course, they put out a final issue. It was the mid-1970s, and I was your age. On the back cover of their final issue was a photograph of an early morning country road, the kind you might find yourself hitchhiking on if you were so adventurous. Beneath it were the words: &quot;Stay Hungry. Stay Foolish.&quot; It was their farewell message as they signed off. Stay Hungry. Stay Foolish. And I have always wished that for myself. And now, as you graduate to begin anew, I wish that for you.\nStewart和他的伙伴出版了几期的“整个地球的目录”，当它完成了自己使命的时候，他们做出了最后一期的目录。那是在七十年代的中期，你们的时代。在最后一期的封底上是清晨乡村公路的照片（如果你有冒险精神的话，你可以自己找到这条路的），在照片之下有这样一段话：“求知若饥，虚心若愚。”这是他们停止了发刊的告别语。“求知若饥，虚心若愚。”我总是希望自己能够那样，现在，在你们即将毕业，开始新的旅程的时候，我也希望你们能这样：\n\nStay Hungry. Stay Foolish.\n求知若饥，虚心若愚。\n\nThank you all very much.\n非常感谢你们。&#x27;], &#x27;uris&#x27;: None, &#x27;data&#x27;: None, &#x27;included&#x27;: [&#x27;metadatas&#x27;, &#x27;documents&#x27;]&#125;</span></span><br><span class="line"><span class="emphasis">删除后计数 15</span></span><br><span class="line"><span class="emphasis">&#123;&#x27;ids&#x27;: [], &#x27;embeddings&#x27;: None, &#x27;metadatas&#x27;: [], &#x27;documents&#x27;: [], &#x27;uris&#x27;: None, &#x27;data&#x27;: None, &#x27;included&#x27;: [&#x27;metadatas&#x27;, &#x27;documents&#x27;]&#125;</span></span><br></pre></td></tr></table></figure>



<h3 id="5-使用-OpenAI-Embeddings"><a href="#5-使用-OpenAI-Embeddings" class="headerlink" title="5. 使用 OpenAI Embeddings"></a>5. 使用 OpenAI Embeddings</h3><p>许多人喜欢使用 OpenAIEmbeddings，以下是如何设置它。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例：chroma_openai.py</span></span><br><span class="line"><span class="keyword">from</span> langchain_openai <span class="keyword">import</span> OpenAIEmbeddings</span><br><span class="line"><span class="comment"># pip install langchain-chromafrom langchain_chroma import Chroma</span></span><br><span class="line"><span class="keyword">import</span> chromadb</span><br><span class="line"><span class="keyword">from</span> langchain_text_splitters <span class="keyword">import</span> CharacterTextSplitter</span><br><span class="line"><span class="keyword">from</span> langchain_community.document_loaders <span class="keyword">import</span> TextLoader</span><br><span class="line"></span><br><span class="line">embeddings = OpenAIEmbeddings()</span><br><span class="line">persistent_client = chromadb.PersistentClient()</span><br><span class="line">new_client = chromadb.EphemeralClient()</span><br><span class="line"><span class="comment"># 加载文档并将其分割成片段</span></span><br><span class="line">loader = TextLoader(<span class="string">&quot;../../resource/knowledge.txt&quot;</span>, encoding=<span class="string">&quot;UTF-8&quot;</span>)</span><br><span class="line">documents = loader.load()</span><br><span class="line"><span class="comment"># 将其分割成片段</span></span><br><span class="line">text_splitter = CharacterTextSplitter(chunk_size=<span class="number">1500</span>, chunk_overlap=<span class="number">0</span>)</span><br><span class="line">docs = text_splitter.split_documents(documents)</span><br><span class="line"></span><br><span class="line">openai_lc_client = Chroma.from_documents(</span><br><span class="line">    docs, embeddings, client=new_client, collection_name=<span class="string">&quot;openai_collection&quot;</span></span><br><span class="line">)</span><br><span class="line">query = <span class="string">&quot;Pixar公司是做什么的?&quot;</span></span><br><span class="line">docs = openai_lc_client.similarity_search(query)</span><br><span class="line"><span class="built_in">print</span>(docs[<span class="number">0</span>].page_content)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">During the next five years, I started a company named NeXT, another company named Pixar, and fell in love with an amazing woman who would become my wife. Pixar went on to create the worlds first computer animated feature film, Toy Story, and is now the most successful animation studio in the world. In a remarkable turn of events, Apple bought NeXT, I retuned to Apple, and the technology we developed at NeXT is at the heart of Apple&#x27;s current renaissance. And Laurene and I have a wonderful family together.</span><br><span class="line">在接下来的五年里, 我创立了一个名叫 NeXT 的公司，还有一个叫Pixar的公司，然后和一个后来成为我妻子的优雅女人相识。Pixar 制作了世界上第一个用电脑制作的动画电影——“”玩具总动员”，Pixar 现在也是世界上最成功的电脑制作工作室。在后来的一系列运转中，Apple 收购了NeXT，然后我又回到了苹果公司。我们在NeXT 发展的技术在 Apple 的复兴之中发挥了关键的作用。我还和 Laurence 一起建立了一个幸福的家庭。</span><br></pre></td></tr></table></figure>



<h3 id="6-其他功能"><a href="#6-其他功能" class="headerlink" title="6. 其他功能"></a>6. 其他功能</h3><h4 id="6-1-带分数的相似性搜索"><a href="#6-1-带分数的相似性搜索" class="headerlink" title="6.1 带分数的相似性搜索"></a>6.1 带分数的相似性搜索</h4><p>返回的距离分数是余弦距离。因此，分数越高越好。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例：chroma_other.py</span></span><br><span class="line">docs = db.similarity_search_with_score(query)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docs[<span class="number">0</span>]</span><br><span class="line"><span class="comment">#0.8513926863670349</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(Document(metadata=&#123;&#x27;source&#x27;: &#x27;../../resource/knowledge.txt&#x27;&#125;, page_content=&quot;During the next five years, I started a company named NeXT, another company named Pixar, and fell in love with an amazing woman who would become my wife. Pixar went on to create the worlds first computer animated feature film, Toy Story, and is now the most successful animation studio in the world. In a remarkable turn of events, Apple bought NeXT, I retuned to Apple, and the technology we developed at NeXT is at the heart of Apple&#x27;s current renaissance. And Laurene and I have a wonderful family together.\n在接下来的五年里, 我创立了一个名叫 NeXT 的公司，还有一个叫Pixar的公司，然后和一个后来成为我妻子的优雅女人相识。Pixar 制作了世界上第一个用电脑制作的动画电影——“”玩具总动员”，Pixar 现在也是世界上最成功的电脑制作工作室。在后来的一系列运转中，Apple 收购了NeXT，然后我又回到了苹果公司。我们在NeXT 发展的技术在 Apple 的复兴之中发挥了关键的作用。我还和 Laurence 一起建立了一个幸福的家庭。&quot;), 0.8513926863670349)</span><br></pre></td></tr></table></figure>

<h4 id="6-2-检索器选项"><a href="#6-2-检索器选项" class="headerlink" title="6.2 检索器选项"></a>6.2 检索器选项</h4><p>本节介绍如何在检索器中使用 Chroma 的不同选项。</p>
<p><strong>MMR：</strong>&#x9664;了在检索器对象中使用相似性搜索外，还可以使用 MMR（Maximal Marginal Relevance，最大边际相关性）是一种信息检索和文本摘要技术，用于在选择文档或文本片段时平衡相关性和多样性。其主要目的是在检索结果中既包含与查询高度相关的内容，又避免结果之间的高度冗余。</p>
<p><strong>MMR 的作用</strong></p>
<ol>
<li><p>提高结果的多样性：通过引入多样性，MMR 可以避免检索结果中出现重复信息，从而提供更全面的答案。</p>
</li>
<li><p>平衡相关性和新颖性：MMR 在选择结果时，既考虑与查询的相关性，也考虑新信息的引入，以确保结果的多样性和覆盖面。</p>
</li>
<li><p>减少冗余：通过避免选择与已选结果高度相似的文档，MMR 可以减少冗余，提高信息的利用效率。</p>
</li>
</ol>
<p><strong>在检索器对象中使用 MMR</strong></p>
<p>在使用向量检索器（如 FAISS）时，通常通过相似性搜索来查找与查询最相关的文档。然而，这种方法有时可能会返回许多相似的结果，导致信息冗余。MMR 可以在这种情况下发挥作用，通过以下步骤实现：</p>
<ol>
<li><p>计算相关性：首先，计算每个候选文档与查询的相似性得分。</p>
</li>
<li><p>计算多样性：然后，计算每个候选文档与已选文档集合的相似性得分。</p>
</li>
<li><p>选择文档：在每一步选择一个文档，使得该文档在相关性和多样性之间达到最佳平衡。</p>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例：chroma_other.py</span></span><br><span class="line">retriever = db.as_retriever(search_type=<span class="string">&quot;mmr&quot;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">retriever.invoke(query)[<span class="number">0</span>]</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">page_content=&#x27;During the next five years, I started a company named NeXT, another company named Pixar, and fell in love with an amazing woman who would become my wife. Pixar went on to create the worlds first computer animated feature film, Toy Story, and is now the most successful animation studio in the world. In a remarkable turn of events, Apple bought NeXT, I retuned to Apple, and the technology we developed at NeXT is at the heart of Apple&#x27;s current renaissance. And Laurene and I have a wonderful family together.</span><br><span class="line">在接下来的五年里, 我创立了一个名叫 NeXT 的公司，还有一个叫Pixar的公司，然后和一个后来成为我妻子的优雅女人相识。Pixar 制作了世界上第一个用电脑制作的动画电影——“”玩具总动员”，Pixar 现在也是世界上最成功的电脑制作工作室。在后来的一系列运转中，Apple 收购了NeXT，然后我又回到了苹果公司。我们在NeXT 发展的技术在 Apple 的复兴之中发挥了关键的作用。我还和 Laurence 一起建立了一个幸福的家庭。&#x27; metadata=&#123;&#x27;source&#x27;: &#x27;../../resource/knowledge.txt&#x27;&#125;</span><br></pre></td></tr></table></figure>





<h2 id="五、Weaviate"><a href="#五、Weaviate" class="headerlink" title="五、Weaviate"></a>五、Weaviate</h2><p>如何使用 <code>langchain-weaviate</code> 包在 LangChain 中开始使用 Weaviate 向量存储。</p>
<p><a target="_blank" rel="noopener" href="https://weaviate.io/">Weaviate</a> 是一个开源的向量数据库。它允许您存储来自您喜爱的机器学习模型的数据对象和向量嵌入，并能够无缝地扩展到数十亿个数据对象。</p>
<p>官方文档：<a target="_blank" rel="noopener" href="https://weaviate.io/developers/weaviate">https://weaviate.io/developers/weaviate</a></p>
<p>要使用此集成，您需要运行一个 Weaviate 数据库实例。</p>
<h3 id="1-最低版本"><a href="#1-最低版本" class="headerlink" title="1. 最低版本"></a>1. 最低版本</h3><p>此模块需要 Weaviate <code>1.23.7</code> 或更高版本。但是，我们建议您使用最新版本的 Weaviate。</p>
<h3 id="2-连接到-Weaviate"><a href="#2-连接到-Weaviate" class="headerlink" title="2. 连接到 Weaviate"></a>2. 连接到 Weaviate</h3><p>在本文中，我们假设您在 <code>http://localhost:8080</code> 上运行了一个本地的 Weaviate 实例，并且端口 50051 用于 <a target="_blank" rel="noopener" href="https://weaviate.io/blog/grpc-performance-improvements">gRPC 通信</a>。因此，我们将使用以下代码连接到 Weaviate：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">weaviate_client = weaviate.connect_to_local()</span><br></pre></td></tr></table></figure>

<h4 id="2-1-其他部署选项"><a href="#2-1-其他部署选项" class="headerlink" title="2.1 其他部署选项"></a>2.1 其他部署选项</h4><p>Weaviate 可以以许多不同的方式进行<a target="_blank" rel="noopener" href="https://weaviate.io/developers/weaviate/starter-guides/which-weaviate">部署</a>，例如使用<a target="_blank" rel="noopener" href="https://console.weaviate.cloud/">Weaviate Cloud Services (WCS)</a>、<a target="_blank" rel="noopener" href="https://weaviate.io/developers/weaviate/installation/docker-compose">Docker</a>或<a target="_blank" rel="noopener" href="https://weaviate.io/developers/weaviate/installation/kubernetes">Kubernetes</a>。</p>
<p>如果您的 Weaviate 实例以其他方式部署，可以在<a target="_blank" rel="noopener" href="https://weaviate.io/developers/weaviate/client-libraries/python#instantiate-a-client">此处阅读更多信息</a>关于连接到 Weaviate 的不同方式。您可以使用不同的<a target="_blank" rel="noopener" href="https://weaviate.io/developers/weaviate/client-libraries/python#python-client-v4-helper-functions">辅助函数</a>，或者<a target="_blank" rel="noopener" href="https://weaviate.io/developers/weaviate/client-libraries/python#python-client-v4-explicit-connection">创建一个自定义实例</a>。</p>
<p>请注意，您需要一个 <code>v4</code> 客户端 API，它将创建一个 <code>weaviate.WeaviateClient</code> 对象。</p>
<h4 id="2-2-认证"><a href="#2-2-认证" class="headerlink" title="2.2 认证"></a>2.2 认证</h4><p>一些 Weaviate 实例，例如在 WCS 上运行的实例，启用了认证，例如 API 密钥和&#x2F;或用户名+密码认证。</p>
<p>阅读<a target="_blank" rel="noopener" href="https://weaviate.io/developers/weaviate/client-libraries/python#authentication">客户端认证指南</a>以获取更多信息，以及<a target="_blank" rel="noopener" href="https://weaviate.io/developers/weaviate/configuration/authentication">深入的认证配置页面</a>。</p>
<h3 id="3-安装"><a href="#3-安装" class="headerlink" title="3. 安装"></a>3. 安装</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装包</span></span><br><span class="line"><span class="comment"># %pip install -Uqq langchain-weaviate</span></span><br><span class="line"><span class="comment"># %pip install openai tiktoken langchain</span></span><br></pre></td></tr></table></figure>



<h3 id="4-环境设置"><a href="#4-环境设置" class="headerlink" title="4. 环境设置"></a>4. 环境设置</h3><p>本文使用 <code>OpenAIEmbeddings</code> 通过 OpenAI API。我们建议获取一个 OpenAI API 密钥，并将其作为名为 <code>OPENAI_API_KEY</code> 的环境变量导出。</p>
<p>完成后，您的 OpenAI API 密钥将被自动读取。如果您对环境变量不熟悉，可以在<a target="_blank" rel="noopener" href="https://docs.python.org/3/library/os.html#os.environ">此处</a>或<a target="_blank" rel="noopener" href="https://www.twilio.com/en-us/blog/environment-variables-python">此指南</a>中阅读更多关于它们的信息。</p>
<p>配置 Weaviate 的 WCD_DEMO_URL 和  WCD_DEMO_RO_KEY</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">setx WCD_DEMO_URL <span class="string">&quot;&quot;</span></span><br><span class="line">setx WCD_DEMO_RO_KEY <span class="string">&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p><img src="/images/LangChain%E7%AF%87_G9fOba6Xvo4HNYxmtVqcpNHXncg_20250908_111819_872.png"></p>
<h3 id="5-通过相似性查找对象"><a href="#5-通过相似性查找对象" class="headerlink" title="5. 通过相似性查找对象"></a>5. 通过相似性查找对象</h3><p>以下是一个示例，演示如何通过查询查找与之相似的对象，从数据导入到查询 Weaviate 实例。</p>
<h4 id="步骤-1：数据导入"><a href="#步骤-1：数据导入" class="headerlink" title="步骤 1：数据导入"></a>步骤 1：数据导入</h4><p>首先，我们将创建要添加到 <code>Weaviate</code> 的数据，方法是加载并分块长文本文件的内容。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_community.document_loaders <span class="keyword">import</span> TextLoader</span><br><span class="line"><span class="keyword">from</span> langchain_openai <span class="keyword">import</span> OpenAIEmbeddings</span><br><span class="line"><span class="keyword">from</span> langchain_text_splitters <span class="keyword">import</span> CharacterTextSplitter</span><br></pre></td></tr></table></figure>

<p>现在，我们可以导入数据。要这样做，连接到 Weaviate 实例，并使用生成的 <code>weaviate_client</code> 对象。例如，我们可以将文档导入如下所示：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例：weaviate_client.py</span></span><br><span class="line">weaviate_client = weaviate.connect_to_weaviate_cloud(</span><br><span class="line">    cluster_url=wcd_url,  <span class="comment"># Replace with your Weaviate Cloud URL</span></span><br><span class="line">    auth_credentials=Auth.api_key(wcd_api_key),  <span class="comment"># Replace with your Weaviate Cloud key</span></span><br><span class="line">    headers=&#123;<span class="string">&#x27;X-OpenAI-Api-key&#x27;</span>: openai_api_key&#125;  <span class="comment"># Replace with your OpenAI API key</span></span><br><span class="line">)</span><br><span class="line">db = WeaviateVectorStore.from_documents(docs, embeddings, client=weaviate_client)</span><br></pre></td></tr></table></figure>

<h4 id="步骤2：执行搜索"><a href="#步骤2：执行搜索" class="headerlink" title="步骤2：执行搜索"></a>步骤2：执行搜索</h4><p>现在我们可以执行相似度搜索。这将返回与查询文本最相似的文档，基于存储在 Weaviate 中的嵌入和从查询文本生成的等效嵌入。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例：weaviate_search.py</span></span><br><span class="line"><span class="comment"># pip install -Uqq langchain-weaviate</span></span><br><span class="line"><span class="comment"># pip install openai tiktoken langchainimport os</span></span><br><span class="line"><span class="keyword">import</span> weaviate</span><br><span class="line"><span class="keyword">from</span> langchain_community.document_loaders <span class="keyword">import</span> TextLoader</span><br><span class="line"><span class="keyword">from</span> langchain_openai <span class="keyword">import</span> OpenAIEmbeddings</span><br><span class="line"><span class="keyword">from</span> langchain_text_splitters <span class="keyword">import</span> CharacterTextSplitter</span><br><span class="line"><span class="keyword">from</span> langchain_weaviate.vectorstores <span class="keyword">import</span> WeaviateVectorStore</span><br><span class="line"><span class="keyword">from</span> weaviate.classes.init <span class="keyword">import</span> Auth</span><br><span class="line"></span><br><span class="line">embeddings = OpenAIEmbeddings()</span><br><span class="line"><span class="comment"># 加载文档并将其分割成片段</span></span><br><span class="line">loader = TextLoader(<span class="string">&quot;../../resource/knowledge.txt&quot;</span>, encoding=<span class="string">&quot;UTF-8&quot;</span>)</span><br><span class="line">documents = loader.load()</span><br><span class="line"><span class="comment"># 将其分割成片段</span></span><br><span class="line">text_splitter = CharacterTextSplitter(chunk_size=<span class="number">1500</span>, chunk_overlap=<span class="number">0</span>)</span><br><span class="line">docs = text_splitter.split_documents(documents)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Best practice: store your credentials in environment variables</span></span><br><span class="line">wcd_url = os.environ[<span class="string">&quot;WCD_DEMO_URL&quot;</span>]</span><br><span class="line">wcd_api_key = os.environ[<span class="string">&quot;WCD_DEMO_RO_KEY&quot;</span>]</span><br><span class="line">openai_api_key = os.environ[<span class="string">&quot;OPENAI_API_KEY&quot;</span>]</span><br><span class="line"></span><br><span class="line">weaviate_client = weaviate.connect_to_weaviate_cloud(</span><br><span class="line">    cluster_url=wcd_url,  <span class="comment"># Replace with your Weaviate Cloud URL</span></span><br><span class="line">    auth_credentials=Auth.api_key(wcd_api_key),  <span class="comment"># Replace with your Weaviate Cloud key</span></span><br><span class="line">    headers=&#123;<span class="string">&#x27;X-OpenAI-Api-key&#x27;</span>: openai_api_key&#125;  <span class="comment"># Replace with your OpenAI API key</span></span><br><span class="line">)</span><br><span class="line">db = WeaviateVectorStore.from_documents(docs, embeddings, client=weaviate_client)</span><br><span class="line">query = <span class="string">&quot;Pixar公司是做什么的?&quot;</span></span><br><span class="line">docs = db.similarity_search(query)</span><br><span class="line"><span class="built_in">print</span>(docs[<span class="number">0</span>].page_content)</span><br><span class="line">weaviate_client.close()</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">During the next five years, I started a company named NeXT, another company named Pixar, and fell in love with an amazing woman who would become my wife. Pixar went on to create the worlds first computer animated feature film, Toy Story, and is now the most successful animation studio in the world. In a remarkable turn of events, Apple bought NeXT, I retuned to Apple, and the technology we developed at NeXT is at the heart of Apple&#x27;s current renaissance. And Laurene and I have a wonderful family together.</span><br><span class="line">在接下来的五年里, 我创立了一个名叫 NeXT 的公司，还有一个叫Pixar的公司，然后和一个后来成为我妻子的优雅女人相识。Pixar 制作了世界上第一个用电脑制作的动画电影——“”玩具总动员”，Pixar 现在也是世界上最成功的电脑制作工作室。在后来的一系列运转中，Apple 收购了NeXT，然后我又回到了苹果公司。我们在NeXT 发展的技术在 Apple 的复兴之中发挥了关键的作用。我还和 Laurence 一起建立了一个幸福的家庭。</span><br></pre></td></tr></table></figure>

<h4 id="步骤3：量化结果相似性"><a href="#步骤3：量化结果相似性" class="headerlink" title="步骤3：量化结果相似性"></a>步骤3：量化结果相似性</h4><p>您可以选择检索相关性“分数”。这是一个相对分数，表示特定搜索结果在搜索结果池中的好坏程度。</p>
<p>请注意，这是相对分数，意味着不应用于确定相关性的阈值。但是，它可用于比较整个搜索结果集中不同搜索结果的相关性。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例：weaviate_similarity.py</span></span><br><span class="line">query = <span class="string">&quot;Pixar公司是做什么的?&quot;</span></span><br><span class="line">docs = db.similarity_search_with_score(query, k=<span class="number">5</span>)</span><br><span class="line"><span class="keyword">for</span> doc <span class="keyword">in</span> docs:<span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;doc[<span class="number">1</span>]:<span class="number">.3</span>f&#125;</span>&quot;</span>, <span class="string">&quot;:&quot;</span>, doc[<span class="number">0</span>].page_content[:<span class="number">100</span>] + <span class="string">&quot;...&quot;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">0.700 : During the next five years, I started a company named NeXT, another company named Pixar, and fell in...</span><br><span class="line">0.337 : I was lucky – I found what I loved to do early in life. Woz and I started Apple in my parents garage...</span><br><span class="line">0.271 : I really didn&#x27;t know what to do for a few months. I felt that I had let the previous generation of e...</span><br><span class="line">0.256 : I&#x27;m pretty sure none of this would have happened if I hadn&#x27;t been fired from Apple. It was awful tas...</span><br><span class="line">0.191 : Stewart and his team put out several issues of The Whole Earth Catalog, and then when it had run its...</span><br></pre></td></tr></table></figure>





<h2 id="六、Qdrant"><a href="#六、Qdrant" class="headerlink" title="六、Qdrant"></a>六、Qdrant</h2><h3 id="1-Qdrant-介绍"><a href="#1-Qdrant-介绍" class="headerlink" title="1. Qdrant 介绍"></a>1. Qdrant 介绍</h3><p><a target="_blank" rel="noopener" href="https://qdrant.tech/documentation/">Qdrant</a>（quadrant &#x2F;‘kwɑdrənt&#x2F; n. 象限；象限仪；四分之一圆）是一个向量相似度搜索引擎。它提供了一个生产就绪的服务，具有方便的 API 来存储、搜索和管理点 - 带有附加载荷的向量。<code>Qdrant</code> 专门支持扩展过滤功能，使其对各种神经网络或基于语义的匹配、分面搜索和其他应用非常有用。</p>
<p>官方文档：<a target="_blank" rel="noopener" href="https://qdrant.tech/documentation/">https://qdrant.tech/documentation/</a></p>
<p>以下展示了如何使用与 <code>Qdrant</code> 向量数据库相关的功能。</p>
<p>有各种运行 <code>Qdrant</code> 的模式，取决于所选择的模式，会有一些细微的差异。选项包括：</p>
<ul>
<li><p>本地模式，无需服务器</p>
</li>
<li><p>Qdrant 云</p>
</li>
</ul>
<p>请参阅<a target="_blank" rel="noopener" href="https://qdrant.tech/documentation/install/">安装说明</a>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%pip install --upgrade --quiet  langchain-qdrant langchain-openai langchain</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例：qdrant_local.py</span></span><br><span class="line"><span class="keyword">from</span> langchain_community.document_loaders <span class="keyword">import</span> TextLoader</span><br><span class="line"><span class="keyword">from</span> langchain_openai <span class="keyword">import</span> OpenAIEmbeddings</span><br><span class="line"><span class="keyword">from</span> langchain_qdrant <span class="keyword">import</span> Qdrant</span><br><span class="line"><span class="keyword">from</span> langchain_text_splitters <span class="keyword">import</span> CharacterTextSplitter</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">loader = TextLoader(<span class="string">&quot;../../resource/knowledge.txt&quot;</span>, encoding=<span class="string">&quot;UTF-8&quot;</span>)</span><br><span class="line">documents = loader.load()</span><br><span class="line">text_splitter = CharacterTextSplitter(chunk_size=<span class="number">1500</span>, chunk_overlap=<span class="number">0</span>)</span><br><span class="line">docs = text_splitter.split_documents(documents)</span><br><span class="line">embeddings = OpenAIEmbeddings()</span><br></pre></td></tr></table></figure>



<h3 id="2-本地模式"><a href="#2-本地模式" class="headerlink" title="2. 本地模式"></a>2. 本地模式</h3><p>Python 客户端允许您在本地模式下运行相同的代码，而无需运行 Qdrant 服务器。这对于测试和调试或者如果您计划仅存储少量向量非常有用。嵌入可能完全保存在内存中或者持久化在磁盘上。</p>
<h4 id="2-1-内存中"><a href="#2-1-内存中" class="headerlink" title="2.1 内存中"></a>2.1 内存中</h4><p>对于一些测试场景和快速实验，您可能更喜欢仅将所有数据保存在内存中，因此当客户端被销毁时数据会丢失 - 通常在脚本&#x2F;笔记本的末尾。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例：qdrant_local.py</span></span><br><span class="line">qdrant = Qdrant.from_documents(</span><br><span class="line">    docs,</span><br><span class="line">    embeddings,</span><br><span class="line">    location=<span class="string">&quot;:memory:&quot;</span>,  <span class="comment"># 本地模式，仅内存存储</span></span><br><span class="line">    collection_name=<span class="string">&quot;my_documents&quot;</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="2-2-磁盘存储"><a href="#2-2-磁盘存储" class="headerlink" title="2.2 磁盘存储"></a>2.2 磁盘存储</h4><p>在不使用 Qdrant 服务器的本地模式下，还可以将您的向量存储在磁盘上，以便它们在运行之间持久化。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例：qdrant_disk.py</span></span><br><span class="line">qdrant = Qdrant.from_documents(</span><br><span class="line">    docs,</span><br><span class="line">    embeddings,</span><br><span class="line">    path=<span class="string">&quot;/tmp/local_qdrant&quot;</span>,</span><br><span class="line">    collection_name=<span class="string">&quot;my_documents&quot;</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>



<h3 id="3-相似度搜索"><a href="#3-相似度搜索" class="headerlink" title="3. 相似度搜索"></a>3. 相似度搜索</h3><p>使用 Qdrant 向量存储的最简单场景是执行相似度搜索。在幕后，我们的查询将使用 <code>embedding_function</code> 对查询进行编码，并用于在 Qdrant 集合中查找相似的文档。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">query = <span class="string">&quot;Pixar公司是做什么的?&quot;</span></span><br><span class="line">found_docs = qdrant.similarity_search(query)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(found_docs[<span class="number">0</span>].page_content)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">During the next five years, I started a company named NeXT, another company named Pixar, and fell in love with an amazing woman who would become my wife. Pixar went on to create the worlds first computer animated feature film, Toy Story, and is now the most successful animation studio in the world. In a remarkable turn of events, Apple bought NeXT, I retuned to Apple, and the technology we developed at NeXT is at the heart of Apple&#x27;s current renaissance. And Laurene and I have a wonderful family together.</span><br><span class="line">在接下来的五年里, 我创立了一个名叫 NeXT 的公司，还有一个叫Pixar的公司，然后和一个后来成为我妻子的优雅女人相识。Pixar 制作了世界上第一个用电脑制作的动画电影——“”玩具总动员”，Pixar 现在也是世界上最成功的电脑制作工作室。在后来的一系列运转中，Apple 收购了NeXT，然后我又回到了苹果公司。我们在NeXT 发展的技术在 Apple 的复兴之中发挥了关键的作用。我还和 Laurence 一起建立了一个幸福的家庭。</span><br></pre></td></tr></table></figure>



<h3 id="4-Qdrant-云"><a href="#4-Qdrant-云" class="headerlink" title="4. Qdrant 云"></a>4. Qdrant 云</h3><p>如果您不想忙于管理基础设施，可以选择在 <a target="_blank" rel="noopener" href="https://cloud.qdrant.io/">Qdrant 云</a>上设置一个完全托管的 Qdrant 集群。包括一个永久免费的 1GB 集群供试用。使用托管版本与使用 Qdrant 的主要区别在于，您需要提供 API 密钥以防止公开访问您的部署。该值也可以设置在 <code>QDRANT_API_KEY</code> 环境变量中。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">url = <span class="string">&quot;&lt;---qdrant cloud cluster url here ---&gt;&quot;</span></span><br><span class="line">api_key = <span class="string">&quot;&lt;---api key here---&gt;&quot;</span></span><br><span class="line">qdrant = Qdrant.from_documents(</span><br><span class="line">    docs,</span><br><span class="line">    embeddings,</span><br><span class="line">    url=url,</span><br><span class="line">    prefer_grpc=<span class="literal">True</span>,</span><br><span class="line">    api_key=api_key,</span><br><span class="line">    collection_name=<span class="string">&quot;my_documents&quot;</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>





<h2 id="七、Milvus"><a href="#七、Milvus" class="headerlink" title="七、Milvus"></a>七、Milvus</h2><h3 id="Milvus-介绍"><a href="#Milvus-介绍" class="headerlink" title="Milvus 介绍"></a><a target="_blank" rel="noopener" href="https://milvus.io/docs/overview.md">Milvus</a> 介绍</h3><p><a target="_blank" rel="noopener" href="https://milvus.io/docs/overview.md">Milvus</a> 是一个数据库，用于存储、索引和管理由深度神经网络和其他机器学习（ML）模型生成的大规模嵌入向量。</p>
<p>官方文档：<a target="_blank" rel="noopener" href="https://milvus.io/docs/overview.md">https://milvus.io/docs/overview.md</a></p>
<p>下面讲解如何使用与 Milvus 向量数据库相关的功能。</p>
<p>配置环境变量 MILVUS_API_URL 和 MILVUS_API_KEY</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">setx MILVUS_API_URL <span class="string">&quot;&quot;</span></span><br><span class="line">setx MILVUS_API_KEY <span class="string">&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p>zilliz：<a target="_blank" rel="noopener" href="https://cloud.zilliz.com/">https://cloud.zilliz.com/</a></p>
<p><img src="/images/LangChain%E7%AF%87_image_20250908_111819_872.png"></p>
<p>要运行，您应该已经启动并运行了一个 <a target="_blank" rel="noopener" href="https://milvus.io/docs/install_standalone-docker.md">Milvus 实例</a>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例：milvus_zilliz.py</span></span><br><span class="line"><span class="comment">#pip install --upgrade --quiet  pymilvus</span></span><br><span class="line"><span class="keyword">from</span> langchain_community.document_loaders <span class="keyword">import</span> TextLoader</span><br><span class="line"><span class="keyword">from</span> langchain_community.vectorstores <span class="keyword">import</span> Milvus</span><br><span class="line"><span class="keyword">from</span> langchain_openai <span class="keyword">import</span> OpenAIEmbeddings</span><br><span class="line"><span class="keyword">from</span> langchain_text_splitters <span class="keyword">import</span> CharacterTextSplitter</span><br><span class="line"><span class="keyword">from</span> langchain_community.document_loaders <span class="keyword">import</span> TextLoader</span><br><span class="line"></span><br><span class="line">loader = TextLoader(<span class="string">&quot;../../resource/knowledge.txt&quot;</span>, encoding=<span class="string">&quot;UTF-8&quot;</span>)</span><br><span class="line">documents = loader.load()</span><br><span class="line">text_splitter = CharacterTextSplitter(chunk_size=<span class="number">1500</span>, chunk_overlap=<span class="number">0</span>)</span><br><span class="line">docs = text_splitter.split_documents(documents)</span><br><span class="line">embeddings = OpenAIEmbeddings()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vector_db = Zilliz.from_documents(  <span class="comment"># or Milvus.from_documents</span></span><br><span class="line">    docs,</span><br><span class="line">    embeddings,</span><br><span class="line">    <span class="comment"># 存储到collection_1中</span></span><br><span class="line">    collection_name=<span class="string">&quot;collection_1&quot;</span>,</span><br><span class="line">    connection_args=&#123;<span class="string">&quot;uri&quot;</span>: os.getenv(<span class="string">&quot;MILVUS_API_URL&quot;</span>), <span class="string">&quot;token&quot;</span>: os.getenv(<span class="string">&quot;MILVUS_API_KEY&quot;</span>)&#125;,<span class="comment">#drop_old=True,  # Drop the old Milvus collection if it exists</span></span><br><span class="line">    auto_id=<span class="literal">True</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">query = <span class="string">&quot;Pixar公司是做什么的?&quot;</span></span><br><span class="line">docs = vector_db.similarity_search(query)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(docs[<span class="number">0</span>].page_content)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">During the next five years, I started a company named NeXT, another company named Pixar, and fell in love with an amazing woman who would become my wife. Pixar went on to create the worlds first computer animated feature film, Toy Story, and is now the most successful animation studio in the world. In a remarkable turn of events, Apple bought NeXT, I retuned to Apple, and the technology we developed at NeXT is at the heart of Apple&#x27;s current renaissance. And Laurene and I have a wonderful family together.</span><br><span class="line">在接下来的五年里, 我创立了一个名叫 NeXT 的公司，还有一个叫Pixar的公司，然后和一个后来成为我妻子的优雅女人相识。Pixar 制作了世界上第一个用电脑制作的动画电影——“”玩具总动员”，Pixar 现在也是世界上最成功的电脑制作工作室。在后来的一系列运转中，Apple 收购了NeXT，然后我又回到了苹果公司。我们在NeXT 发展的技术在 Apple 的复兴之中发挥了关键的作用。我还和 Laurence 一起建立了一个幸福的家庭。</span><br></pre></td></tr></table></figure>





<h2 id="八、总结"><a href="#八、总结" class="headerlink" title="八、总结"></a>八、总结</h2><p>下面是 Chroma、Weaviate、Qdrant 和 Milvus 四个向量数据库的功能对比：</p>
<p>这些数据库在功能和特性上各有优势，选择合适的数据库应根据具体的应用需求和技术栈来决定。</p>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>longchao
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://mzfnai.com/2025/06/30/176LangChain%E7%AF%87-%E5%90%91%E9%87%8F%E7%AE%A1%E7%90%86%E9%AB%98%E9%98%B6%E6%8C%87%E5%8D%97/" title="LangChain篇-向量管理高阶指南">http://mzfnai.com/2025/06/30/176LangChain篇-向量管理高阶指南/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/LangChain/" rel="tag"># LangChain</a>
              <a href="/tags/%E5%90%91%E9%87%8F%E5%AD%98%E5%82%A8/" rel="tag"># 向量存储</a>
              <a href="/tags/%E5%90%91%E9%87%8F%E5%B5%8C%E5%85%A5/" rel="tag"># 向量嵌入</a>
              <a href="/tags/%E8%AF%AD%E4%B9%89%E6%90%9C%E7%B4%A2/" rel="tag"># 语义搜索</a>
              <a href="/tags/%E7%89%B9%E5%BE%81%E5%B7%A5%E7%A8%8B/" rel="tag"># 特征工程</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2025/06/23/175LangChain%E7%AF%87-%E6%B6%88%E6%81%AF%E7%AE%A1%E7%90%86%E4%B8%8E%E8%81%8A%E5%A4%A9%E5%8E%86%E5%8F%B2%E5%AD%98%E5%82%A8/" rel="prev" title="LangChain篇-消息管理与聊天历史存储">
      <i class="fa fa-chevron-left"></i> LangChain篇-消息管理与聊天历史存储
    </a></div>
      <div class="post-nav-item">
    <a href="/2025/07/01/177LangChain%E7%AF%87-%E9%AB%98%E6%95%88%E6%A3%80%E7%B4%A2%E5%99%A8%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/" rel="next" title="LangChain篇-高效检索器最佳实践">
      LangChain篇-高效检索器最佳实践 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81Vector-stores-%E5%90%91%E9%87%8F%E5%AD%98%E5%82%A8"><span class="nav-number">1.</span> <span class="nav-text">一、Vector stores(向量存储)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E5%90%91%E9%87%8F%E5%B5%8C%E5%85%A5"><span class="nav-number">2.</span> <span class="nav-text">二、向量嵌入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E7%89%B9%E5%BE%81%E5%92%8C%E5%90%91%E9%87%8F"><span class="nav-number">3.</span> <span class="nav-text">三、特征和向量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E3%80%81Chroma"><span class="nav-number">4.</span> <span class="nav-text">四、Chroma</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%9F%BA%E6%9C%AC%E7%A4%BA%E4%BE%8B"><span class="nav-number">4.1.</span> <span class="nav-text">1. 基本示例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%9F%BA%E6%9C%AC%E7%A4%BA%E4%BE%8B%EF%BC%88%E5%8C%85%E6%8B%AC%E4%BF%9D%E5%AD%98%E5%88%B0%E7%A3%81%E7%9B%98%EF%BC%89"><span class="nav-number">4.2.</span> <span class="nav-text">2. 基本示例（包括保存到磁盘）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E5%B0%86-Chroma-%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BC%A0%E9%80%92%E7%BB%99-Langchain"><span class="nav-number">4.3.</span> <span class="nav-text">3. 将 Chroma 客户端传递给 Langchain</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E6%9B%B4%E6%96%B0%E5%92%8C%E5%88%A0%E9%99%A4"><span class="nav-number">4.4.</span> <span class="nav-text">4. 更新和删除</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E4%BD%BF%E7%94%A8-OpenAI-Embeddings"><span class="nav-number">4.5.</span> <span class="nav-text">5. 使用 OpenAI Embeddings</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E5%85%B6%E4%BB%96%E5%8A%9F%E8%83%BD"><span class="nav-number">4.6.</span> <span class="nav-text">6. 其他功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#6-1-%E5%B8%A6%E5%88%86%E6%95%B0%E7%9A%84%E7%9B%B8%E4%BC%BC%E6%80%A7%E6%90%9C%E7%B4%A2"><span class="nav-number">4.6.1.</span> <span class="nav-text">6.1 带分数的相似性搜索</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-2-%E6%A3%80%E7%B4%A2%E5%99%A8%E9%80%89%E9%A1%B9"><span class="nav-number">4.6.2.</span> <span class="nav-text">6.2 检索器选项</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%94%E3%80%81Weaviate"><span class="nav-number">5.</span> <span class="nav-text">五、Weaviate</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E6%9C%80%E4%BD%8E%E7%89%88%E6%9C%AC"><span class="nav-number">5.1.</span> <span class="nav-text">1. 最低版本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E8%BF%9E%E6%8E%A5%E5%88%B0-Weaviate"><span class="nav-number">5.2.</span> <span class="nav-text">2. 连接到 Weaviate</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-%E5%85%B6%E4%BB%96%E9%83%A8%E7%BD%B2%E9%80%89%E9%A1%B9"><span class="nav-number">5.2.1.</span> <span class="nav-text">2.1 其他部署选项</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-%E8%AE%A4%E8%AF%81"><span class="nav-number">5.2.2.</span> <span class="nav-text">2.2 认证</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E5%AE%89%E8%A3%85"><span class="nav-number">5.3.</span> <span class="nav-text">3. 安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E7%8E%AF%E5%A2%83%E8%AE%BE%E7%BD%AE"><span class="nav-number">5.4.</span> <span class="nav-text">4. 环境设置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E9%80%9A%E8%BF%87%E7%9B%B8%E4%BC%BC%E6%80%A7%E6%9F%A5%E6%89%BE%E5%AF%B9%E8%B1%A1"><span class="nav-number">5.5.</span> <span class="nav-text">5. 通过相似性查找对象</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A4-1%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5"><span class="nav-number">5.5.1.</span> <span class="nav-text">步骤 1：数据导入</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A42%EF%BC%9A%E6%89%A7%E8%A1%8C%E6%90%9C%E7%B4%A2"><span class="nav-number">5.5.2.</span> <span class="nav-text">步骤2：执行搜索</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A5%E9%AA%A43%EF%BC%9A%E9%87%8F%E5%8C%96%E7%BB%93%E6%9E%9C%E7%9B%B8%E4%BC%BC%E6%80%A7"><span class="nav-number">5.5.3.</span> <span class="nav-text">步骤3：量化结果相似性</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AD%E3%80%81Qdrant"><span class="nav-number">6.</span> <span class="nav-text">六、Qdrant</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Qdrant-%E4%BB%8B%E7%BB%8D"><span class="nav-number">6.1.</span> <span class="nav-text">1. Qdrant 介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%9C%AC%E5%9C%B0%E6%A8%A1%E5%BC%8F"><span class="nav-number">6.2.</span> <span class="nav-text">2. 本地模式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-%E5%86%85%E5%AD%98%E4%B8%AD"><span class="nav-number">6.2.1.</span> <span class="nav-text">2.1 内存中</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-%E7%A3%81%E7%9B%98%E5%AD%98%E5%82%A8"><span class="nav-number">6.2.2.</span> <span class="nav-text">2.2 磁盘存储</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E7%9B%B8%E4%BC%BC%E5%BA%A6%E6%90%9C%E7%B4%A2"><span class="nav-number">6.3.</span> <span class="nav-text">3. 相似度搜索</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Qdrant-%E4%BA%91"><span class="nav-number">6.4.</span> <span class="nav-text">4. Qdrant 云</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%83%E3%80%81Milvus"><span class="nav-number">7.</span> <span class="nav-text">七、Milvus</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Milvus-%E4%BB%8B%E7%BB%8D"><span class="nav-number">7.1.</span> <span class="nav-text">Milvus 介绍</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%AB%E3%80%81%E6%80%BB%E7%BB%93"><span class="nav-number">8.</span> <span class="nav-text">八、总结</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="longchao"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">longchao</p>
  <div class="site-description" itemprop="description">A blog about life, technology, and everything in between.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">249</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">79</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">639</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/longchao012" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;longchao012" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:longchao012@gmail.com" title="E-Mail → mailto:longchao012@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://plus.google.com/longchao012" title="Google → https:&#x2F;&#x2F;plus.google.com&#x2F;longchao012" rel="noopener" target="_blank"><i class="fa fa-fw fa-google"></i>Google</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2022 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">longchao</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
